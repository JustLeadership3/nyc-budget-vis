(this["webpackJsonpnyc-budget-vis"]=this["webpackJsonpnyc-budget-vis"]||[]).push([[0],{167:function(e,t,a){e.exports=a.p+"static/media/logo.2445cf85.png"},182:function(e,t,a){e.exports=a(314)},191:function(e,t,a){},192:function(e,t,a){},314:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(40),o=a.n(c),s=a(94),i=(a(191),a(50)),u=a(51),p=a(58),l=a(55),d=a(167),f=a.n(d),h=(a(192),a(23)),m=a(348),y=a(339),E=a(343),v=a(39),g=a(48),x=a.n(g),b=a(95),O=a(68),A=a(168),S=a(169),j=a(96),_=a.n(j);var w=function(e){for(var t=[],a=[],n={},r=new Date(Date.now()).getFullYear(),c=0;c<e.length;c++){var o=e[c];if(1===Object.keys(o).length&&(n.agency=o.agency_expenditures.toUpperCase()),"TOTAL DEPT."===o.agency_expenditures){for(var s=r-10;s<=r;s++){var i={},u=void 0!==o["fy".concat(s)]?o["fy".concat(s)]:o["fy_".concat(s)];if(void 0!==u){var p=parseFloat(u.replace(/,/g,""));isNaN(p)||(i.x=s.toString(),i.y=parseFloat(u.replace(/,/g,"")),a.push(i))}}n.data=a,t.push(n),n={},a=[]}}return t};var D=function(e){for(var t=[],a=0;a<e.length;){var n=e[a];a+=1,"agency_capital_expenditures_by_purpose"in n&&n.agency_capital_expenditures_by_purpose.includes("TOTAL")&&t.push(n)}for(var r=[],c=0;c<t.length;){for(var o=t[c],s=new Date(Date.now()).getFullYear(),i=[],u=s-10;u<=s;u++){var p=o["fy_".concat(u)];if(void 0!==p){var l=parseFloat(p.replace(/,/g,"")),d={};d.x=u.toString(),d.y=l,i.push(d)}}var f={},h=o.agency_capital_expenditures_by_purpose.substring(6).toUpperCase();f.agency=h,f.data=i,r.push(f),c+=1}return r},T=a(122);var k=function(e){var t={},a=new Date(Date.now()).getFullYear();e.forEach((function(e){var n=e.agy_nm,r=parseInt(e.fisc_yr,10),c=parseInt(e.cty_fnd,10);r>=a-10&&r<=a&&(n in t!==!0&&(t[n]={}),t[n][r]=c)}));for(var n=[],r=0,c=Object.entries(t);r<c.length;r++){var o=Object(T.a)(c[r],2),s=o[0],i=o[1],u={};u.agency=s.toUpperCase();for(var p=[],l=0,d=Object.entries(i);l<d.length;l++){var f=Object(T.a)(d[l],2),h=f[0],m=f[1];p.push({x:h,y:1e3*m})}u.data=p,n.push(u)}return n},N={currentDataSet:"",capitalExp:null,agencyExp:null,expenseActuals:null},C=function(e){return{type:"UPDATE_CURRENT_DATASET",currentDataSet:e}},P=Object(O.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STORE_CAPITAL_EXP":return Object(v.a)(Object(v.a)({},e),{},{capitalExp:t.capitalExp});case"STORE_AGENCY_EXP":return Object(v.a)(Object(v.a)({},e),{},{agencyExp:t.agencyExp});case"STORE_EXPENSE_ACTUALS":return Object(v.a)(Object(v.a)({},e),{},{expenseActuals:t.expenseActuals});case"UPDATE_CURRENT_DATASET":return Object(v.a)(Object(v.a)({},e),{},{currentDataSet:t.currentDataSet});default:return e}}),Object(O.a)(S.a,Object(A.createLogger)({collapsed:!0}))),R=a(342),U=a(347),F=a(346),L=a(340),X=a(345),I=function(e){Object(p.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=[],t=this.props.currentDataSet;var a="";return"capitalExp"===this.props.currentDataSetName?a="Capital Expenditures":"agencyExp"===this.props.currentDataSetName?a="Agency Expenditures":"expenseActuals"===this.props.currentDataSetName&&(a="Expense Actuals"),console.log(this.props.currentDataSetName),r.a.createElement("div",{id:"graph-container"},r.a.createElement(R.a,{id:"victory-chart",scale:"linear",theme:U.a.material,padding:{left:100,bottom:50,right:100,top:100},style:{parent:{maxwidth:1e3}},width:1e3},r.a.createElement(F.a,{id:"chart-title",text:a,style:{fontSize:"20px"},dy:30,dx:30,textAnchor:"start"}),t.map((function(t){var a=function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}();return e.push({name:t.agency,symbol:{fill:a}}),r.a.createElement(L.a,{key:t.agency,style:{data:{stroke:a},parent:{border:"1px solid #ccc"}},data:t.data})}))),r.a.createElement(X.a,{gutter:20,itemsPerRow:30,data:e,width:1e3}))}}]),a}(n.Component),Y=function(e){Object(p.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",null,r.a.createElement("div",{className:"card-container"},[{name:"Capital Expenditures",definition:"Capital expenditures are the amounts spent for tangible assets that will be used for more than one year in the operations of a business."},{name:"Agency Expenditures",definition:"Annual spending for personal services and other than personal services (OTPS) within each city agency."},{name:"Expense Actuals",definition:"How much money an account has paid out in expenditures at a given point in time during a fiscal year."}].map((function(a){return r.a.createElement(m.a,{className:"".concat(t.root,"} card"),variant:"outlined",key:a.name},r.a.createElement(y.a,null,r.a.createElement("p",{className:"card-title"},a.name),r.a.createElement("p",{className:"card-descrition"},a.definition)),r.a.createElement(E.a,{id:"button",onClick:function(){e.props.getData(a.name)}},"Show Graph"))}))),r.a.createElement(I,{currentDataSet:this.props.currentDataSet(),currentDataSetName:this.props.currentDataSetName}))}}]),a}(n.Component),B=Object(s.b)((function(e){return{currentDataSet:function(){return"capitalExp"===e.currentDataSet?e.capitalExp:"agencyExp"===e.currentDataSet?e.agencyExp:"expenseActuals"===e.currentDataSet?e.expenseActuals:[]},currentDataSetName:e.currentDataSet}}),(function(e){return{getData:function(t){switch(t){case"Capital Expenditures":return void e(function(){var e=Object(b.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.a.get("https://data.cityofnewyork.us/resource/hukm-snmq.json");case 3:a=e.sent,n=D(a.data),t({type:"STORE_CAPITAL_EXP",capitalExp:n}),t(C("capitalExp")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}());case"Agency Expenditures":return void e(function(){var e=Object(b.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.a.get("https://data.cityofnewyork.us/resource/cwjy-rrh3.json");case 3:a=e.sent,n=w(a.data),t({type:"STORE_AGENCY_EXP",agencyExp:n}),t(C("agencyExp")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}());case"Expense Actuals":return void e(function(){var e=Object(b.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.a.get("https://data.cityofnewyork.us/resource/7yay-m4ae.json");case 3:a=e.sent,n=k(a.data),t({type:"STORE_EXPENSE_ACTUALS",expenseActuals:n}),t(C("expenseActuals")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}());default:return}}}}))(Object(h.a)((function(e){return{root:{minWidth:100},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}}))(Y)),G=function(e){Object(p.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:f.a,className:"App-logo",alt:"logo"})),r.a.createElement(B,null))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(s.a,{store:P},r.a.createElement(r.a.StrictMode,null,r.a.createElement(G,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[182,1,2]]]);
//# sourceMappingURL=main.1c9711f3.chunk.js.map